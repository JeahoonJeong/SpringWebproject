<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="mainMapper">

<!-- 유사 카테고리 책 -->
<select id="similCate" parameterType="java.lang.String" resultType="com.spring.webproject.dto.MainDTO">
	select bookTitle,bookImage.isbn,authorName,bookImage from (
	select bookTitle,isbn,b.authorName from (
	select authorId,bookTitle,a.isbn from books a,
	(select isbn from bookCategory where 
	categoryId=(select categoryId from bookCategory where isbn=#{isbn}) and isbn!=#{isbn}) b
	where a.isbn=b.isbn) a, (select authorName,authorId from author) b where a.authorId=b.authorId) a,
	bookImage where a.isbn=bookImage.isbn
</select>

</mapper>